\section{결과 비교}
\label{sec:results}

\subsection{실험 설계}
\label{subsec:experimental_design}

\subsubsection{실험 셋업}

\begin{itemize}
    \item \textbf{대상 변수:} KOEQUIPTE, KOWRCCNSE, KOIPALL.G (3개)
    \item \textbf{모형:} ARIMA, VAR, DFM, DDFM (4개)
    \item \textbf{평가:} 22개 예측 수평선(1--22개월), 모형-대상 조합별 평균 계산
\end{itemize}

\input{tables/tab_dataset_params}

표~\ref{tab:dataset_params} 요약:
\begin{itemize}
    \item 각 대상 변수마다 평균 43개 시계열 사용
    \item 훈련 기간: 1985--2019년
    \item 예측 기간: 2024--2025년
\end{itemize}

\textbf{훈련 기간과 예측 기간 사이의 4년 간격:}
\begin{itemize}
    \item \textbf{COVID-19 시기 제외:} 2020--2023년 비정상적 패턴 제외, 정상 경제 패턴만 학습
    \item \textbf{데이터 누수 방지:} 미래 정보 누수 방지, 실제 예측 성능 공정 평가
    \item \textbf{구조 변화 검증:} COVID-19 이후 경제 구조 변화 영향 평가
\end{itemize}

\textbf{모형 파라미터:}
\begin{itemize}
    \item \textbf{ARIMA:} 차수 (1,1,1)
    \item \textbf{VAR:} 시차 1
    \item \textbf{DFM:} 요인 3개, 최대 5000회 반복
    \item \textbf{DDFM:} 64--32 레이어, 요인 3개, 100 에폭
\end{itemize}

\textbf{DFM/DDFM 공통 설정:}
\begin{itemize}
    \item 요인 수: 3개 (통일)
    \item 블록 구조: 단일 글로벌 블록 (수치적 안정성)
    \item 상태 공간 차원: 15차원 (요인 3개 $\times$ tent kernel 파라미터 5개)
\end{itemize}

\subsubsection{데이터 전처리}

\begin{itemize}
    \item \textbf{변환:} 시계열별 변환 유형('lin', 'log', 'chg' 등) 적용
    \item \textbf{결측치 처리:} forward-fill $\to$ backward-fill $\to$ naive forecaster 순차 적용
    \item \textbf{표준화:}
    \begin{itemize}
        \item ARIMA/VAR: 원본 스케일 유지
        \item DFM/DDFM: StandardScaler 적용 (평균 0, 표준편차 1)
    \end{itemize}
\end{itemize}

\subsubsection{데이터 품질 문제 및 시리즈 제거}

KOIPALL.G DFM 훈련 중 수치적 불안정성 관찰:
\begin{itemize}
    \item 제거된 시리즈: 높은 상관관계(> 0.95) 시리즈, 극단적 결측치(91.3\%) 시리즈 (pmiall, pmiout)
    \item 수치적 안정성 개선: 블록 구조 단일 글로벌 블록으로 단순화, 요인 수 3개 통일
\end{itemize}

\subsubsection{예측 모형}

\textbf{ARIMA:} 자기회귀 및 이동평균 성분 포착, 정상성을 위해 차분 사용, 단변량 시계열 예측. 차수 (1,1,1) 사용.

\textbf{VAR:} ARIMA를 다변량으로 확장, 여러 시계열 간 동적 관계 포착. 시차 1 사용. 
\begin{itemize}
    \item 긴 수평선에서 수치적 불안정성
    \item Horizon 1에서 persistence 문제 (마지막 훈련 값 예측)
    \item 평가 코드에서 VAR-1의 비정상적 작은 오차(sMSE $<$ 1e-6 또는 sMAE $<$ 1e-4) 감지하여 무효 처리
\end{itemize}

\textbf{DFM:} 많은 시계열에서 공통 요인 추출, 차원 축소, 혼합주기 데이터 처리 \cite{stock2002forecasting}:
\begin{align}
x_t &= C z_t + \varepsilon_t, \quad \varepsilon_t \sim \mathcal{N}(0, R) \\
z_t &= A z_{t-1} + \eta_t, \quad \eta_t \sim \mathcal{N}(0, Q)
\end{align}
\begin{itemize}
    \item $x_t$: 관측 시계열, $z_t$: 공통 요인, $C$: 요인 적재 행렬, $A$: 전이 행렬
    \item 파라미터: EM 알고리즘으로 추정
    \item 요인 추정: 칼만 필터와 스무더 사용
    \item 혼합주기 처리: 텐트 커널 집계 방법 \cite{mariano2003new}
\end{itemize}

\textbf{DDFM:} 오토인코더 기반 아키텍처, 복잡한 요인 구조 학습 \cite{andreini2020deep}:
\begin{itemize}
    \item 비선형 인코더로 요인 관계 학습
    \item PyTorch Lightning 구현
\end{itemize}

\subsubsection{Forecasting과 Nowcasting}

\textbf{Forecasting:}
\begin{itemize}
    \item 과거 데이터로 미래 값 예측
    \item 각 모형 훈련 후 1--22개월 수평선에 대해 예측 생성
\end{itemize}

\textbf{Nowcasting:} \cite{banbura2012nowcasting}
\begin{itemize}
    \item 공식 통계 발표 전 현재 시점 거시경제 변수 추정
    \item 각 목표 월에 대해 4주 전, 1주 전 시점에서 예측
    \item 시리즈별 발표 시차 기준으로 미발표 데이터 마스킹
\end{itemize}

\subsubsection{평가 지표}

표준화된 지표 사용 (서로 다른 시계열과 규모 간 공정한 비교):
\begin{itemize}
    \item sMSE: 표준화된 평균제곱오차
    \item sMAE: 표준화된 평균절대오차
    \item sRMSE: 표준화된 평균제곱근오차
    \item 표준화: 훈련 데이터의 표준편차 사용
    \item 최종 지표: 모형-대상 조합별로 1--22개월 수평선 평균
\end{itemize}
